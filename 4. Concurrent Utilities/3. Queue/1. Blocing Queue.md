
---

## Java `BlockingQueue`

### 1. What is `BlockingQueue`?

* `BlockingQueue` is an interface in **`java.util.concurrent`**.
* It is **thread-safe**, meaning multiple threads can safely **insert (enqueue)** and **remove (dequeue)** elements concurrently.
* It supports **blocking operations**:

  * Blocks when trying to **remove** an element from an **empty queue**.
  * Blocks when trying to **add** an element to a **full queue** (if bounded).

### 2. Key Characteristics

* Thread-safe (no explicit synchronization needed).
* Designed for **producer–consumer** problems.
* **Null elements are not allowed**.

  * Inserting `null` throws `NullPointerException`.

---

## 3. BlockingQueue Method Types

BlockingQueue methods are grouped based on how they behave when an operation cannot be performed immediately.

| Operation   | Throws Exception | Special Value | Blocks   | Times Out                     |
| ----------- | ---------------- | ------------- | -------- | ----------------------------- |
| **Insert**  | `add(o)`         | `offer(o)`    | `put(o)` | `offer(o, timeout, timeunit)` |
| **Remove**  | `remove()`       | `poll()`      | `take()` | `poll(timeout, timeunit)`     |
| **Examine** | `element()`      | `peek()`      | —        | —                             |

### Method Behavior Explanation

* **Throws Exception**

  * Immediately throws exception if operation fails.
* **Special Value**

  * Returns a value like `true`, `false`, or `null`.
* **Blocks**

  * Waits indefinitely until operation can be completed.
* **Times Out**

  * Waits for a specified time, then returns a special value if unsuccessful.

---

## 4. BlockingQueue Implementations

### 1️⃣ `ArrayBlockingQueue`

* Backed by an **array**.
* **Bounded queue** (fixed size).
* Capacity must be defined at creation time.
* Size **cannot be changed**.

---

### 2️⃣ `DelayQueue`

* Specialized **priority queue**.
* Elements are ordered by **delay time**.
* An element can be taken **only after its delay expires**.
* Commonly used in **scheduled tasks**.

---

### 3️⃣ `LinkedBlockingQueue`

* Based on **linked nodes**.
* Can be:

  * **Bounded** (capacity specified)
  * **Unbounded** (default)
* Better scalability than array-based queues.

---

### 4️⃣ `PriorityBlockingQueue`

* **Unbounded** queue.
* Orders elements using **priority rules** (like `PriorityQueue`).
* Does **not block on insertion** (since unbounded).
* Blocks only during retrieval if empty.

---

### 5️⃣ `SynchronousQueue`

* **No internal storage**.
* Each `put()` must wait for a corresponding `take()`.
* Used for **direct handoff** between threads.
* Very useful in **thread pools**.

---

## 5. Common Use Cases

* Producer–Consumer pattern
* Thread pools
* Task scheduling
* Concurrent message passing

---
