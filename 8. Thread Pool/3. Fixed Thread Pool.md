
---

# üìå Fixed Thread Pool Executor in Java

## 1Ô∏è‚É£ What is a Fixed Thread Pool?

A **Fixed Thread Pool** is a type of `ExecutorService` in Java where:

* A **fixed number of threads** are created upfront.
* These threads are **reused** to execute multiple tasks.
* Tasks beyond the available threads are placed into a **task queue**.
* Threads pick tasks **one by one** from the queue and execute them.

üëâ Thread count **never increases or decreases** during execution.

---

## 2Ô∏è‚É£ Why Use a Fixed Thread Pool?

* Limits resource usage (CPU, memory)
* Avoids overhead of creating threads repeatedly
* Improves performance for multiple short-lived tasks
* Provides controlled concurrency

---

## 3Ô∏è‚É£ Basic Example: Fixed Thread Pool with 2 Threads

### ‚úÖ Task Class (`Runnable`)

```java
class Task implements Runnable {
    private final int taskId;

    public Task(int taskId) {
        this.taskId = taskId;
    }

    @Override
    public void run() {
        System.out.println(
            "Task with ID " + taskId +
            " being executed by Thread " +
            Thread.currentThread().getName()
        );

        try {
            Thread.sleep(500); // simulate work
        } catch (InterruptedException e) {
            throw new RuntimeException(e);
        }
    }
}
```

---

### ‚úÖ Main Class

```java
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class Main {
    public static void main(String[] args) {

        try (ExecutorService service = Executors.newFixedThreadPool(2)) {
            for (int i = 0; i < 10; i++) {
                service.execute(new Task(i));
            }
        }
    }
}
```

---

### üì§ Sample Output

```
Task with ID 1 being executed by Thread pool-1-thread-2
Task with ID 0 being executed by Thread pool-1-thread-1
Task with ID 3 being executed by Thread pool-1-thread-1
Task with ID 2 being executed by Thread pool-1-thread-2
Task with ID 4 being executed by Thread pool-1-thread-1
Task with ID 5 being executed by Thread pool-1-thread-2
Task with ID 6 being executed by Thread pool-1-thread-1
Task with ID 7 being executed by Thread pool-1-thread-2
Task with ID 9 being executed by Thread pool-1-thread-2
Task with ID 8 being executed by Thread pool-1-thread-1
```

---

## 4Ô∏è‚É£ Key Observations from Output

* Only **2 threads** are created:

  * `pool-1-thread-1`
  * `pool-1-thread-2`
* Tasks are executed **in parallel**, but:

  * Order of execution is **not guaranteed**
  * Threads **do not strictly alternate**
* Same threads are **reused** for multiple tasks

---

## 5Ô∏è‚É£ Another Example (7 Tasks, 2 Threads)

### ‚úÖ Work Class

```java
class Work implements Runnable {
    private final int workId;

    public Work(int workId) {
        this.workId = workId;
    }

    @Override
    public void run() {
        System.out.println(
            "Work ID " + workId +
            " being executed by Thread " +
            Thread.currentThread().getName()
        );

        try {
            Thread.sleep(500);
        } catch (InterruptedException e) {
            throw new RuntimeException(e);
        }
    }
}
```

---

### ‚úÖ Main Method

```java
ExecutorService service = Executors.newFixedThreadPool(2);

for (int i = 0; i < 7; i++) {
    service.execute(new Work(i));
}

service.shutdown();
```

---

### üì§ Sample Output

```
Work ID 1 being executed by Thread pool-1-thread-2
Work ID 0 being executed by Thread pool-1-thread-1
Work ID 2 being executed by Thread pool-1-thread-2
Work ID 3 being executed by Thread pool-1-thread-1
Work ID 4 being executed by Thread pool-1-thread-2
Work ID 5 being executed by Thread pool-1-thread-1
Work ID 6 being executed by Thread pool-1-thread-2
```

---

## 6Ô∏è‚É£ Important Notes About Execution Order

‚ö†Ô∏è **Do NOT assume**:

* Threads will alternate one by one
* Tasks will execute in submission order

‚úîÔ∏è **Reality**:

* Execution depends on thread availability & scheduling
* One thread may execute multiple tasks in a row

---

## 7Ô∏è‚É£ How Fixed Thread Pool Works Internally (Under the Hood)

### üîπ Components

1. **Thread Pool**

   * Fixed number of threads (e.g., 2)

2. **Task Queue**

   * Stores submitted tasks (`Runnable`)

---

### üîÑ Execution Flow

```
Tasks Submitted
       ‚Üì
 Task Queue
       ‚Üì
Thread Pool (Fixed Size)
       ‚Üì
Task Execution
```

* Tasks are placed in the **queue**
* Available threads **pick tasks**
* Once a task completes:

  * Thread returns to pool
  * Picks next task from queue
* Process continues until queue is empty

---

## 8Ô∏è‚É£ Summary

‚úÖ Fixed Thread Pool:

* Has a **fixed number of reusable threads**
* Uses a **task queue**
* Efficient for controlled parallelism
* Prevents excessive thread creation

üß† Best Used When:

* Number of tasks is large
* System resources must be limited
* Tasks are independent

---
